(this.webpackJsonpmarvel=this.webpackJsonpmarvel||[]).push([[0],[,,,,,,,,function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),r=s(3),i=s.n(r),n=(s(8),s(0));var o=()=>Object(n.jsxs)("header",{className:"app__header",children:[Object(n.jsx)("h1",{className:"app__title",children:Object(n.jsxs)("a",{href:"#",children:[Object(n.jsx)("span",{children:"Marvel"})," information portal"]})}),Object(n.jsx)("nav",{className:"app__menu",children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"#",children:"Characters"})}),"/",Object(n.jsx)("li",{children:Object(n.jsx)("a",{href:"#",children:"Comics"})})]})})]}),l=(s(10),s.p+"static/media/mjolnir.61f31e18.png");class h{constructor(){var e=this;this._PATH="https://gateway.marvel.com:443/v1/public/",this._PUBLIC_API_KEY="apikey=d1464a3d250445e9bfda5939ce0a2d1c",this._baseOffset=0,this.getResource=async e=>{const t=await fetch(e);if(!t.ok)throw new Error("Could not fetch ".concat(e,", status: ").concat(t.status));return await t.json()},this.getAllCharacters=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e._baseOffset;const s=await e.getResource("".concat(e._PATH,"characters?limit=9&offset=").concat(t,"&").concat(e._PUBLIC_API_KEY));return s.data.results.map(e._getCharacterData)},this.getCharacterData=async e=>{const t=await this.getResource("".concat(this._PATH,"characters/").concat(e,"?").concat(this._PUBLIC_API_KEY));return this._getCharacterData(t.data.results[0])},this._getCharacterData=e=>({name:e.name,decription:e.decription,thumbnail:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension),homepage:e.urls[0].url,wiki:e.urls[1].url,id:e.id,comics:e.comics.items})}}s(11);var d=()=>Object(n.jsx)("div",{className:"spiner_wrapper",children:Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"rgb(255, 255, 255)",display:"block",shapeRendering:"auto"},width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:Object(n.jsx)("path",{d:"M30 50A20 20 0 0 0 70 50A20 22 0 0 1 30 50",fill:"#2a2826",stroke:"none",children:Object(n.jsx)("animateTransform",{attributeName:"transform",type:"rotate",dur:"1s",repeatCount:"indefinite",keyTimes:"0;1",values:"0 50 51;360 50 51"})})})}),j=s.p+"static/media/error.42292aa1.gif";s(12);var m=()=>Object(n.jsx)("div",{className:"error_wrapper",children:Object(n.jsx)("img",{src:j,alt:"Error"})});class b extends a.Component{constructor(){super(...arguments),this.state={char:{name:null,decription:null,thumbnail:null,homepage:null,wiki:null},loaded:!1,error:!1},this.marvelService=new h,this.onCharLoaded=e=>this.setState({char:e,loaded:!0}),this.onCharLoading=()=>this.setState({loaded:!1}),this.onError=()=>{this.setState({loaded:!0,error:!0})},this.updateCharacter=()=>{this.onCharLoading();const e=Math.floor(400*Math.random()+1010900);this.marvelService.getCharacterData(e).then(this.onCharLoaded).catch(this.onError)}}componentDidMount(){this.updateCharacter()}componentDidUpdate(){}componentWillUnmount(){}render(){const{char:e,loaded:t,error:s}=this.state,a=s?Object(n.jsx)(m,{}):null,c=t?null:Object(n.jsx)(d,{}),r=!s&&t?Object(n.jsx)(u,{char:e}):null;return Object(n.jsxs)("div",{className:"randomchar",children:[a,c,r,Object(n.jsxs)("div",{className:"randomchar__static",children:[Object(n.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",Object(n.jsx)("br",{}),"Do you want to get to know him better?"]}),Object(n.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),Object(n.jsx)("button",{className:"button button__main",onClick:this.updateCharacter,children:Object(n.jsx)("div",{className:"inner",children:"try it"})}),Object(n.jsx)("img",{src:l,alt:"mjolnir",className:"randomchar__decoration"})]})]})}}const u=e=>{let{char:t}=e;const{name:s,decription:a,thumbnail:c,homepage:r,wiki:i}=t,o="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===c?"contain":"cover";return Object(n.jsxs)("div",{className:"randomchar__block",children:[Object(n.jsx)("img",{src:c,alt:"Random character",className:"randomchar__img",style:{objectFit:"".concat(o)}}),Object(n.jsxs)("div",{className:"randomchar__info",children:[Object(n.jsx)("p",{className:"randomchar__name",children:s}),Object(n.jsx)("p",{className:"randomchar__descr",children:a||"No decription :("}),Object(n.jsxs)("div",{className:"randomchar__btns",children:[Object(n.jsx)("a",{href:r,className:"button button__main",children:Object(n.jsx)("div",{className:"inner",children:"homepage"})}),Object(n.jsx)("a",{href:i,className:"button button__secondary",children:Object(n.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})};var _=b;s(13);class p extends a.Component{constructor(){super(...arguments),this.state={list:[],loaded:!1,error:!1,offset:210,charEnded:!1,newItemsLoading:!1},this.refList=[],this.marvelService=new h,this.setRefList=e=>{this.refList.push(e)},this.onCharFocus=e=>{this.refList.forEach((e=>e.className="char__item")),this.refList[e].className="char__item char__item_selected",this.refList[e].focus()},this.onListLoaded=e=>{e.length<9&&this.setState({charEnded:!0}),this.setState((t=>{let{list:s,offset:a}=t;return{list:[...s,...e],loaded:!0,offset:a+9,newItemsLoading:!1}}))},this.onError=()=>{this.setState({loaded:!0,error:!0})},this.onListLoading=()=>{this.setState({newItemsLoading:!0})},this.renderList=e=>{if(!e)return;const t=e.map(((e,t)=>Object(n.jsxs)("li",{className:"char__item",ref:this.setRefList,tabIndex:0,onClick:()=>{this.props.onSelectedChar(e.id),this.onCharFocus(t)},onKeyUp:s=>{"Enter"===s.key&&(this.props.onSelectedChar(e.id),this.onCharFocus(t))},children:[Object(n.jsx)("img",{src:e.thumbnail,alt:e.name}),Object(n.jsx)("div",{className:"char__name",children:e.name})]},e.id)));return Object(n.jsx)("ul",{className:"char__grid",children:t})},this.refreshingList=e=>{this.onListLoading(),this.marvelService.getAllCharacters(e).then(this.onListLoaded).catch(this.onError)}}componentDidMount(){this.marvelService.getAllCharacters().then(this.onListLoaded).catch(this.onError)}render(){const{list:e,loaded:t,error:s,offset:a,charEnded:c,newItemsLoading:r}=this.state,i=this.renderList(e),o=s?Object(n.jsx)(m,{}):null,l=t?null:Object(n.jsx)(d,{}),h=!s&&t?i:null;return Object(n.jsxs)("div",{className:"char__list",children:[o,l,h,Object(n.jsx)("button",{className:"button button__main button__long",onClick:()=>this.refreshingList(a),disabled:r,style:{display:c?"none":"block"},children:Object(n.jsx)("div",{className:"inner",children:"load more"})})]})}}var x=p;s(14),s(15);var O=()=>Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),Object(n.jsxs)("div",{className:"skeleton",children:[Object(n.jsxs)("div",{className:"pulse skeleton__header",children:[Object(n.jsx)("div",{className:"pulse skeleton__circle"}),Object(n.jsx)("div",{className:"pulse skeleton__mini"})]}),Object(n.jsx)("div",{className:"pulse skeleton__block"}),Object(n.jsx)("div",{className:"pulse skeleton__block"}),Object(n.jsx)("div",{className:"pulse skeleton__block"})]})]});class v extends a.Component{constructor(){super(...arguments),this.state={char:null,loaded:!0,error:!1},this.marvelService=new h,this.onCharLoaded=e=>this.setState({char:e,loaded:!0}),this.onCharLoading=()=>this.setState({loaded:!1}),this.onError=()=>{this.setState({loaded:!0,error:!0})},this.updateChar=()=>{const{selectedCharID:e}=this.props;e&&(this.onCharLoading(),this.marvelService.getCharacterData(e).then(this.onCharLoaded).catch(this.onError))}}componentDidMount(){this.updateChar()}componentDidUpdate(e){this.props.selectedCharID!==e.selectedCharID&&this.updateChar()}render(){const{char:e,loaded:t,error:s}=this.state,a=e||!t||s?null:Object(n.jsx)(O,{}),c=s?Object(n.jsx)(m,{}):null,r=t?null:Object(n.jsx)(d,{}),i=!s&&t&&e?Object(n.jsx)(g,{char:e}):null;return Object(n.jsxs)("div",{className:"char__info",children:[a,c,r,i]})}}const g=e=>{let{char:t}=e;const{name:s,decription:a,thumbnail:c,homepage:r,wiki:i,comics:o}=t,l="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===c?"contain":"cover",h=function(e){if(!e.length)return"There is no comics with this character";const t=[];for(let s=0;s<e.length&&10!==s;s++)t.push(Object(n.jsx)("li",{className:"char__comics-item",children:e[s].name},s));return t}(o);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"char__basics",children:[Object(n.jsx)("img",{src:c,alt:s,style:{objectFit:"".concat(l)}}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"char__info-name",children:s}),Object(n.jsxs)("div",{className:"char__btns",children:[Object(n.jsx)("a",{href:r,className:"button button__main",children:Object(n.jsx)("div",{className:"inner",children:"homepage"})}),Object(n.jsx)("a",{href:i,className:"button button__secondary",children:Object(n.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),Object(n.jsx)("div",{className:"char__descr",children:a||"No decription :("}),Object(n.jsx)("div",{className:"char__comics",children:"Comics:"}),Object(n.jsx)("ul",{className:"char__comics-list",children:h})]})};var f=v;class N extends a.Component{constructor(){super(...arguments),this.state={selectedCharID:null},this.onSelectedChar=e=>{this.setState({selectedCharID:e})}}render(){return Object(n.jsxs)("div",{className:"char__content",children:[Object(n.jsx)(x,{onSelectedChar:this.onSelectedChar}),Object(n.jsx)(f,{selectedCharID:this.state.selectedCharID})]})}}var C=N,L=s.p+"static/media/vision.067d4ae1.png";var w=()=>Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)(o,{}),Object(n.jsxs)("main",{children:[Object(n.jsx)(_,{}),Object(n.jsx)(C,{}),Object(n.jsx)("img",{className:"bg-decoration",src:L,alt:"vision"})]})]});s(16);i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(w,{})}),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.0903449b.chunk.js.map